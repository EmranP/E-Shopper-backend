# E-Shopper Backend

Этот репозиторий содержит серверную часть платформы E-Shopper. Сервер обеспечивает обработку данных, управление базой данных и предоставляет полноценный REST API для взаимодействия с клиентской частью.

## Основной функционал

- **Управление товарами:**
  - Добавление новых товаров через админ-панель.
  - Редактирование существующих товаров.
  - Просмотр всех товаров в виде таблицы.
- **Аутентификация:**
  - Безопасная регистрация и вход с использованием JWT-токенов.
  - Поддержка **refresh-токенов** для обновления access-токена.
- **REST API:** Полный набор API-эндпоинтов для управления данными.
- **База данных:** Хранение и управление данными с использованием **PostgreSQL**.

## Технологии

- **Среда выполнения:** Node.js
- **Фреймворк:** Express.js
- **База данных:** PostgreSQL
- **Аутентификация:** JWT (access/refresh tokens)
- **API:** Полный REST API
- **Валидация данных:** Используется `express-validator` (без ORM)
- **Менеджер пакетов:** Bun

## Структура проекта

- **`src/`** — основная папка с исходным кодом.
- **`config/`** — конфигурации для базы данных, JWT и других важных сервисов.
- **`controllers/`** — контроллеры для обработки запросов.
- **`middlewares/`** — промежуточные слои для аутентификации, валидации и обработки ошибок.
- **`models/`** — SQL-схемы и запросы (без ORM).
- **`routes/`** — маршруты API, связывающие контроллеры с URL.
- **`services/`** — логика работы с данными, включая работу с refresh-токенами.
- **`utils/`** — утилиты для повторно используемых функций (например, хэширование паролей).
- **`.env`** — файл для хранения переменных окружения.
- **`tsconfig.json`** — файл конфигурации TypeScript.
- **`package.json`** — список зависимостей и скриптов для проекта.

## Начало работы

1. Клонируйте репозиторий:

   ```bash
   git clone <backend-repo-url>
   cd e-shopper-backend
   ```

2. Установите зависимости:

   ```bash
   bun install
   ```

3. Создайте файл `.env` в корневой папке и добавьте следующие переменные:

   ```plaintext
   DATABASE_URL=postgres://<username>:<password>@localhost:5432/e_shopper
   JWT_SECRET=<ваш-jwt-секрет>
   JWT_REFRESH_SECRET=<ваш-refresh-token-секрет>
   PORT=5000
   ```

4. Запустите сервер:

   ```bash
   bun start
   ```

## API Эндпоинты

### **Auth Маршруты:**

- `POST /api/auth/register` – Регистрация нового пользователя.
- `POST /api/auth/login` – Вход пользователя и возврат access + refresh JWT.
- `POST /api/auth/refresh` – Обновление access-токена с использованием refresh-токена.
- `POST /api/auth/logout` – Выход пользователя (удаление refresh-токена).

### **Маршруты товаров:**

- `GET /api/products` – Получение всех товаров.
- `POST /api/products` – Добавление нового товара (только для админов).
- `PUT /api/products/:id` – Редактирование товара (только для админов).
- `DELETE /api/products/:id` – Удаление товара (только для админов).
